!function(i,s){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){s===t?t=0:t<0&&(t+=this.length)<0&&(t=0);for(var r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1});var a,u,y,d,l,b,p,o,e,t,n=brytescore.q,c=[],f="https://api.brytecore.com",m=31536e6,g=0,v=0,r=0,h="",I=!1,U="javascript",S="0.3.5",w={analytics:"0.3.1"},T=!1,C=!1,k=!1,O="",N=!1,D=function(e){console.log("Brytescore error: "+e)},J=function(e){e+="=";for(var t=document.cookie.split(";"),r=0;r<t.length;r++){for(var o=t[r];" "===o.charAt(0);)o=o.substring(1);if(-1!==o.indexOf(e))return o.substring(e.length,o.length)}return null},_=function(e,t,r){e=encodeURIComponent(e),t=encodeURIComponent(t),document.cookie=null!==r?e+"="+t+"; expires="+r+"; path=/":e+"="+t+"; path=/"};function A(e,t){var r=new XMLHttpRequest;return"withCredentials"in r?(r.open(e,t,!0),r.setRequestHeader("Content-Type","application/json")):"undefined"!=typeof XDomainRequest?i.navigator.userAgent.match(/MSIE [6-9]/)?(t=t.replace(/^http(?:s)?\:/,i.location.protocol),(r=new XDomainRequest).open(e,t)):((r=new XDomainRequest).open(e,t),r.setRequestHeader("Content-Type","application/json")):r=null,r}function E(){var e=u.responseText;if(e&&""!==e&&(e=JSON.parse(e))&&e.hasOwnProperty("code"))switch(e.code.toLowerCase()){case"success":case"unauthorizederror":break;case"badrequesterror":D("The request was not properly formatted.")}}function L(){brytescore.killHeartbeat(),_("brytescore_session",null,new Date(1974,9,18)),I=!0,p=b=s}i.brytescore=function(){""===h&&(h=location.href);var e=location.href;e!==h&&(i.brytescore.killHeartbeat(),i.brytescore.pageView({}),h=e);var t,r=[].slice.call(arguments);if(0===r.length&&D("Invalid method name."),0<(a=r.shift()).indexOf(".")){var o=a.split("."),n=o[0],s=o[1];t="object"==typeof i.brytescore[n]?i.brytescore[n][s]:null}else t=i.brytescore[a];"function"==typeof t?t.apply(i,r):brytescore.q.push([].slice.call(arguments))},i.brytescore.q=[],i.brytescore.on=function(e,t){c.push(e,t)},i.brytescore.emit=function(e,t){},i.brytescore.removeListener=function(e,t){for(var r=c,o=0;o<r.length;o++)e===r[o][0]&&t===r[o][1]&&c.splice(o,1)},i.brytescore.removeAllListeners=function(e){for(var t=c,r=0;r<t.length;r++)e===t[r][0]&&c.splice(r,1)},i.brytescore.authenticated=function(e){if(!(k||e&&e.isImpersonating)){var t,r,o,n=e.userAccount.id,s=J("brytescore_uu");null!==s?""!==(t=JSON.parse(decodeURIComponent(s))).uid&&t.uid!==n?function(e){L(),l=e,d=brytescore.generateUUID(),b=brytescore.generateUUID();var t=navigator.userAgent;I=!1;var r=JSON.stringify({aid:d,uid:e}),o=new Date;o.setTime(o.getTime()+m),_("brytescore_uu",r,o.toUTCString()),brytescore.boost("sessionStarted","started new session",{sessionId:b,browserUA:t,anonymousId:d}),i.brytescore.pageView({})}(n):d=t.aid:d=brytescore.generateUUID(),r=JSON.stringify({aid:d,uid:n}),(o=new Date).setTime(o.getTime()+m),_("brytescore_uu",r,o.toUTCString()),brytescore.boost("authenticated","Logged In",e)}},i.brytescore.submittedForm=function(e){k||e&&e.isImpersonating||brytescore.boost("submittedForm","Submitted a Form",e)},i.brytescore.startedChat=function(e){k||e&&e.isImpersonating||brytescore.boost("startedChat","User Started a Live Chat",e)},i.brytescore.updatedUserInfo=function(e){if(!(k||e&&e.isImpersonating)){var t=e.userAccount.id;if(s===l||t!==l){var r,o,n=J("brytescore_uu");l=t,d=null!==n?JSON.parse(decodeURIComponent(n)).aid:brytescore.generateUUID(),r=JSON.stringify({aid:d,uid:t}),(o=new Date).setTime(o.getTime()+m),_("brytescore_uu",r,o.toUTCString())}brytescore.boost("updatedUserInfo","Updated User Information",e)}},i.brytescore.registeredAccount=function(e){if(!(k||e&&e.isImpersonating)){var t=e.userAccount.id;if(s===l||t!==l){var r,o,n=J("brytescore_uu");l=t,d=null!==n?JSON.parse(decodeURIComponent(n)).aid:brytescore.generateUUID(),r=JSON.stringify({aid:d,uid:t}),(o=new Date).setTime(o.getTime()+m),_("brytescore_uu",r,o.toUTCString())}brytescore.boost("registeredAccount","Created a new account",e)}},i.brytescore.setAPIKey=function(e){y=e;var t,r,o=J("brytescore_apikey");null!==o?""!==(t=JSON.parse(decodeURIComponent(o))).apikey&&t.apikey!==e&&(r=JSON.stringify({apikey:e}),_("brytescore_apikey",r,null)):(r=JSON.stringify({apikey:e}),_("brytescore_apikey",r,null))},i.brytescore.devMode=function(e){T=e},i.brytescore.validationMode=function(e){C=e},i.brytescore.localUrl=function(e){O=e},i.brytescore.impersonate=function(e){e.isImpersonating&&(k=!0,brytescore.boost("impersonate","Impersonated User",e))},i.brytescore.pageView=function(e){if(!(k||e&&e.isImpersonating)){v=0,p=brytescore.generateUUID(),e.pageUrl=i.location.href,e.pageTitle=document.title,e.referrer=document.referrer,brytescore.boost("pageView","Viewed a Page",e);var t=navigator.userAgent;e=JSON.stringify({sid:b,brw:t,aid:d});var r=new Date;r.setTime(r.getTime()+18e5),_("brytescore_session",e,r.toUTCString()),brytescore.heartBeat(),o=i.setInterval(function(){var e=(new Date).getTime();0===g||e-g<18e5?(g=(new Date).getTime(),brytescore.heartBeat()):(g=0,L(),i.brytescore.updateCookies(),i.brytescore.pageView({}))},15e3)}},i.brytescore.killHeartbeat=function(){clearInterval(o)},i.brytescore.boost=function(e,t,r){k||r&&r.isImpersonating||!function t(r,o,n,s){N?O&&((u=new XMLHttpRequest).open("POST",O,!0),u.setRequestHeader("Content-type","application/json")):u=A("Post",f+"/"+r);if(void 0===y){var e,a=J("brytescore_apikey");null!==a&&""!==(e=JSON.parse(decodeURIComponent(a))).apikey&&brytescore.setAPIKey(e.apikey)}if(null!==u){var i=o.indexOf("."),c={event:o,eventDisplayName:n,hostName:location.hostname,apiKey:y,anonymousId:d,userId:l.toString(),pageViewId:p,sessionId:b,library:U,libraryVersion:S,schemaVersion:-1===i?w.analytics:w[o.substring(0,i)],data:s||{}};N&&(c.brytecoreUrl=f+"/"+r),C&&(c.validationOnly=C),u.onload=E,u.onerror=function(e){N=!0,t(r,o,n,s)},c=JSON.stringify(c),T?console.log(c):u.send(c)}}("boost",e,t,r)},i.brytescore.heartBeat=function(){i.brytescore.boost("heartBeat","Heartbeat",{elapsedTime:v}),v+=15},i.brytescore.load=function(e,t){var a=A("GET",e);a.onload=function(){var e=a.readyState;if(!e||/loaded|complete/.test(e)||4===a.readyState&&200===a.status){var t=JSON.parse(a.responseText),r=t.events,o=t.namespace;for(var n in w[o]=t.version,i.brytescore[o]={},r){i.brytescore.factory=function(e,t,r){return function(){return i.brytescore.boost(t+"."+e,r,arguments[0])}},i.brytescore[o][n]=i.brytescore.factory(n,o,r[n].displayName);for(var s=0;s<i.brytescore.q.length;s++)o+"."+n===i.brytescore.q[s][0]&&i.brytescore[o][n](i.brytescore.q[s][1])}}},a.onerror=function(){t&&brytescore.load(t)},a.send(),i.brytescore.q=[]};var R=function(){0===r&&(s!==t&&function(){t.removeListener?(t.removeListener("mousemove",R),t.removeListener("click",R),t.removeListener("keyup",R),t.removeListener("scroll",R)):t.detachEvent&&(t.detachEvent("onmousemove",R),t.detachEvent("onkeyup",R),t.detachEvent("onclick",R),t.detachEvent("onscroll",R));t=s}(),!0===I&&(i.brytescore.updateCookies(),i.brytescore.pageView({})),clearInterval(r),clearTimeout(e),r=i.setInterval(function(){clearInterval(r),r=0,e=setTimeout(function(){L()},15e5),(t=i).addEventListener?(t.addEventListener("mousemove",R),t.addEventListener("click",R),t.addEventListener("scroll",R),t.addEventListener("keyup",R)):t.attachEvent&&(t.attachEvent("onmousemove",R),t.attachEvent("onclick",R),t.attachEvent("onscroll",R),t.attachEvent("onkeyup",R))},3e5))};for(var q,V,H,M=[],j=0;j<256;j++)M[j]=(j<16?"0":"")+j.toString(16);i.brytescore.generateUUID=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return M[255&e]+M[e>>8&255]+M[e>>16&255]+M[e>>24&255]+"-"+M[255&t]+M[t>>8&255]+"-"+M[t>>16&15|64]+M[t>>24&255]+"-"+M[63&r|128]+M[r>>8&255]+"-"+M[r>>16&255]+M[r>>24&255]+M[255&o]+M[o>>8&255]+M[o>>16&255]+M[o>>24&255]},i.brytescore.updateCookies=function(){var e,t,r,o,n=J("brytescore_uu"),s=J("brytescore_session");l=null!==n?(e=JSON.parse(decodeURIComponent(n)),d=e.aid,e.uid):(d=brytescore.generateUUID(),""),t=JSON.stringify({aid:d,uid:l}),(r=new Date).setTime(r.getTime()+m),_("brytescore_uu",t,r.toUTCString()),null!==s&&!0!==I?(e=JSON.parse(decodeURIComponent(s)),b=e.sid):(b=brytescore.generateUUID(),o=navigator.userAgent,t=JSON.stringify({sid:b,brw:o,aid:d}),(r=new Date).setTime(r.getTime()+18e5),_("brytescore_session",t,r.toUTCString()),null===n&&brytescore.boost("brytescoreUUIDCreated","New user id Created",{anonymousId:d}),null!==s&&!0!==I||(I=!1,brytescore.boost("sessionStarted","started new session",{sessionId:b,browserUA:o,anonymousId:d})))},i.brytescore.is_loaded=function(e){console.log("is_loaded function called for package "+e)},i.brytescore.processQueue=function(){for(var e=0;e<n.length;e++)brytescore.apply(document,n[e])},i.brytescore.init=function(){if(void 0===y)for(var e=0;e<n.length;e++)"setapikey"===n[e][0].toLowerCase()&&(brytescore.setAPIKey(n[e][1]),n.splice(e,1));if(void 0===y){var t,r=J("brytescore_apikey");null!==r&&""!==(t=JSON.parse(decodeURIComponent(r))).apikey&&brytescore.setAPIKey(t.apikey)}brytescore.updateCookies(),brytescore.processQueue(),R()},"object"!=typeof JSON?(q="https://cdn.brytecore.com/brytescore.js/JSON3.min.js",V=function(){brytescore.init()},(H=document.createElement("script")).src=q,H.async=!0,H.onreadystatechange=H.onload=function(){var e=H.readyState;V.done||e&&!/loaded|complete/.test(e)||(V.done=!0,V())},document.getElementsByTagName("head")[0].appendChild(H)):brytescore.init()}(window);