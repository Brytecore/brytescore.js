!function(i,a){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){a===t?t=0:t<0&&(t+=this.length)<0&&(t=0);for(var r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1});var c,d,l,b,p,f,n,e,t,o=brytescore.q,s=[],m="https://api.brytecore.com",u=31536e6,y=0,g=0,r=0,v="",h=!1,I="javascript",U="0.3.7",S={analytics:"0.3.1"},w=!1,T=!1,C=!1,k="",O=!1,N=function(e){console.log("Brytescore error: "+e)},D=function(e){e+="=";for(var t=document.cookie.split(";"),r=0;r<t.length;r++){for(var o=t[r];" "===o.charAt(0);)o=o.substring(1);if(-1!==o.indexOf(e))return o.substring(e.length,o.length)}return null},J=function(e,t,r){e=encodeURIComponent(e),t=encodeURIComponent(t),document.cookie=null!==r?e+"="+t+"; expires="+r+"; path=/":e+"="+t+"; path=/"};function q(e,t){var r=new XMLHttpRequest;return"withCredentials"in r?(r.open(e,t,!0),r.setRequestHeader("Content-Type","application/json")):"undefined"!=typeof XDomainRequest?i.navigator.userAgent.match(/MSIE [6-9]/)?(t=t.replace(/^http(?:s)?\:/,i.location.protocol),(r=new XDomainRequest).open(e,t)):((r=new XDomainRequest).open(e,t),r.setRequestHeader("Content-Type","application/json")):r=null,r}function _(){brytescore.killHeartbeat(),J("brytescore_session",null,new Date(1974,9,18)),h=!0,f=p=a}i.brytescore=function(){""===v&&(v=location.href);var e=location.href;e!==v&&(i.brytescore.killHeartbeat(),i.brytescore.pageView({}),v=e);var t,r=[].slice.call(arguments);if(0===r.length&&N("Invalid method name."),0<(c=r.shift()).indexOf(".")){var o=c.split("."),n=o[0],s=o[1];t="object"==typeof i.brytescore[n]?i.brytescore[n][s]:null}else t=i.brytescore[c];"function"==typeof t?t.apply(i,r):brytescore.q.push([].slice.call(arguments))},i.brytescore.q=[],i.brytescore.on=function(e,t){s.push(e,t)},i.brytescore.emit=function(e,t){},i.brytescore.removeListener=function(e,t){for(var r=s,o=0;o<r.length;o++)e===r[o][0]&&t===r[o][1]&&s.splice(o,1)},i.brytescore.removeAllListeners=function(e){for(var t=s,r=0;r<t.length;r++)e===t[r][0]&&s.splice(r,1)},i.brytescore.authenticated=function(e,t){if(!(C||e&&e.isImpersonating)){var r,o,n,s=e.userAccount.id,a=D("brytescore_uu");null!==a?""!==(r=JSON.parse(decodeURIComponent(a))).uid&&r.uid!==s?function(e){_(),b=e,l=brytescore.generateUUID(),p=brytescore.generateUUID();var t=navigator.userAgent;h=!1;var r=JSON.stringify({aid:l,uid:e}),o=new Date;o.setTime(o.getTime()+u),J("brytescore_uu",r,o.toUTCString()),brytescore.boost("sessionStarted","started new session",{sessionId:p,browserUA:t,anonymousId:l}),i.brytescore.pageView({})}(s):l=r.aid:l=brytescore.generateUUID(),o=JSON.stringify({aid:l,uid:s}),(n=new Date).setTime(n.getTime()+u),J("brytescore_uu",o,n.toUTCString()),brytescore.boost("authenticated","Logged In",e,t)}},i.brytescore.submittedForm=function(e,t){C||e&&e.isImpersonating||brytescore.boost("submittedForm","Submitted a Form",e,t)},i.brytescore.startedChat=function(e,t){C||e&&e.isImpersonating||brytescore.boost("startedChat","User Started a Live Chat",e,t)},i.brytescore.updatedUserInfo=function(e,t){if(!(C||e&&e.isImpersonating)){var r=e.userAccount.id;if(a===b||r!==b){var o,n,s=D("brytescore_uu");b=r,l=null!==s?JSON.parse(decodeURIComponent(s)).aid:brytescore.generateUUID(),o=JSON.stringify({aid:l,uid:r}),(n=new Date).setTime(n.getTime()+u),J("brytescore_uu",o,n.toUTCString())}brytescore.boost("updatedUserInfo","Updated User Information",e,t)}},i.brytescore.registeredAccount=function(e,t){if(!(C||e&&e.isImpersonating)){var r=e.userAccount.id;if(a===b||r!==b){var o,n,s=D("brytescore_uu");b=r,l=null!==s?JSON.parse(decodeURIComponent(s)).aid:brytescore.generateUUID(),o=JSON.stringify({aid:l,uid:r}),(n=new Date).setTime(n.getTime()+u),J("brytescore_uu",o,n.toUTCString())}brytescore.boost("registeredAccount","Created a new account",e,t)}},i.brytescore.setAPIKey=function(e){d=e;var t,r,o=D("brytescore_apikey");null!==o?""!==(t=JSON.parse(decodeURIComponent(o))).apikey&&t.apikey!==e&&(r=JSON.stringify({apikey:e}),J("brytescore_apikey",r,null)):(r=JSON.stringify({apikey:e}),J("brytescore_apikey",r,null))},i.brytescore.devMode=function(e){w=e},i.brytescore.validationMode=function(e){T=e},i.brytescore.localUrl=function(e){k=e},i.brytescore.impersonate=function(e,t){e.isImpersonating&&(C=!0,brytescore.boost("impersonate","Impersonated User",e,t))},i.brytescore.pageView=function(e,t){if(!(C||e&&e.isImpersonating)){g=0,f=brytescore.generateUUID(),e.pageUrl=i.location.href,e.pageTitle=document.title,e.referrer=document.referrer,brytescore.boost("pageView","Viewed a Page",e,t);var r=navigator.userAgent;e=JSON.stringify({sid:p,brw:r,aid:l});var o=new Date;o.setTime(o.getTime()+18e5),J("brytescore_session",e,o.toUTCString()),brytescore.heartBeat(),n=i.setInterval(function(){var e=(new Date).getTime();0===y||e-y<18e5?(y=(new Date).getTime(),brytescore.heartBeat()):(y=0,_(),i.brytescore.updateCookies(),i.brytescore.pageView({}))},15e3)}},i.brytescore.killHeartbeat=function(){clearInterval(n)},i.brytescore.boost=function(e,t,r,o){C||r&&r.isImpersonating||!function t(r,o,n,s,a){var i;O?k&&((i=new XMLHttpRequest).open("POST",k,!0),i.setRequestHeader("Content-type","application/json")):i=q("Post",m+"/"+r);if(void 0===d){var e,c=D("brytescore_apikey");null!==c&&""!==(e=JSON.parse(decodeURIComponent(c))).apikey&&brytescore.setAPIKey(e.apikey)}if(null!==i){i.timeout=5e3;var u=o.indexOf("."),y={event:o,eventDisplayName:n,hostName:location.hostname,apiKey:d,anonymousId:l,userId:b.toString(),pageViewId:f,sessionId:p,library:I,libraryVersion:U,schemaVersion:-1===u?S.analytics:S[o.substring(0,u)],data:s||{}};O&&(y.brytecoreUrl=m+"/"+r),T&&(y.validationOnly=T),i.onload=function(){var e=i.responseText;if(e&&""!==e&&(e=JSON.parse(e))&&e.hasOwnProperty("code"))switch(e.code.toLowerCase()){case"success":case"unauthorizederror":break;case"badrequesterror":N("The request was not properly formatted.")}},i.onreadystatechange=function(){if(4==i.readyState&&a)try{a(i.status,JSON.parse(i.responseText))}catch(e){a(i.status,null,e)}},i.onerror=function(e){if(O=!0,a)try{a(i.status,null,e)}catch(e){a(i.status,null,e)}else t(r,o,n,s,a)},i.ontimeout=function(e){a&&a(i.status,null,e)},y=JSON.stringify(y),w?(console.log(y),a&&a("DevMode",null)):i.send(y)}else a&&a("cors not supported",null)}("boost",e,t,r,o)},i.brytescore.heartBeat=function(){i.brytescore.boost("heartBeat","Heartbeat",{elapsedTime:g}),g+=15},i.brytescore.load=function(e,t){var a=q("GET",e);a.onload=function(){var e=a.readyState;if(!e||/loaded|complete/.test(e)||4===a.readyState&&200===a.status){var t=JSON.parse(a.responseText),r=t.events,o=t.namespace;for(var n in S[o]=t.version,i.brytescore[o]={},r){i.brytescore.factory=function(e,t,r){return function(){return i.brytescore.boost(t+"."+e,r,arguments[0],arguments[1])}},i.brytescore[o][n]=i.brytescore.factory(n,o,r[n].displayName);for(var s=0;s<i.brytescore.q.length;s++)o+"."+n===i.brytescore.q[s][0]&&(i.brytescore.q[s][2]?i.brytescore[o][n](i.brytescore.q[s][1],i.brytescore.q[s][2]):i.brytescore[o][n](i.brytescore.q[s][1]))}}},a.onerror=function(){t&&brytescore.load(t)},a.send(),i.brytescore.q=[]};var A=function(){0===r&&(a!==t&&function(){t.removeListener?(t.removeListener("mousemove",A),t.removeListener("click",A),t.removeListener("keyup",A),t.removeListener("scroll",A)):t.detachEvent&&(t.detachEvent("onmousemove",A),t.detachEvent("onkeyup",A),t.detachEvent("onclick",A),t.detachEvent("onscroll",A));t=a}(),!0===h&&(i.brytescore.updateCookies(),i.brytescore.pageView({})),clearInterval(r),clearTimeout(e),r=i.setInterval(function(){clearInterval(r),r=0,e=setTimeout(function(){_()},15e5),(t=i).addEventListener?(t.addEventListener("mousemove",A),t.addEventListener("click",A),t.addEventListener("scroll",A),t.addEventListener("keyup",A)):t.attachEvent&&(t.attachEvent("onmousemove",A),t.attachEvent("onclick",A),t.attachEvent("onscroll",A),t.attachEvent("onkeyup",A))},3e5))};for(var E,L,R,M=[],V=0;V<256;V++)M[V]=(V<16?"0":"")+V.toString(16);i.brytescore.generateUUID=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return M[255&e]+M[e>>8&255]+M[e>>16&255]+M[e>>24&255]+"-"+M[255&t]+M[t>>8&255]+"-"+M[t>>16&15|64]+M[t>>24&255]+"-"+M[63&r|128]+M[r>>8&255]+"-"+M[r>>16&255]+M[r>>24&255]+M[255&o]+M[o>>8&255]+M[o>>16&255]+M[o>>24&255]},i.brytescore.updateCookies=function(){var e,t,r,o,n=D("brytescore_uu"),s=D("brytescore_session");b=null!==n?(e=JSON.parse(decodeURIComponent(n)),l=e.aid,e.uid):(l=brytescore.generateUUID(),""),t=JSON.stringify({aid:l,uid:b}),(r=new Date).setTime(r.getTime()+u),J("brytescore_uu",t,r.toUTCString()),null!==s&&!0!==h?(e=JSON.parse(decodeURIComponent(s)),p=e.sid):(p=brytescore.generateUUID(),o=navigator.userAgent,t=JSON.stringify({sid:p,brw:o,aid:l}),(r=new Date).setTime(r.getTime()+18e5),J("brytescore_session",t,r.toUTCString()),null===n&&brytescore.boost("brytescoreUUIDCreated","New user id Created",{anonymousId:l}),null!==s&&!0!==h||(h=!1,brytescore.boost("sessionStarted","started new session",{sessionId:p,browserUA:o,anonymousId:l})))},i.brytescore.is_loaded=function(e){console.log("is_loaded function called for package "+e)},i.brytescore.processQueue=function(){for(var e=0;e<o.length;e++)brytescore.apply(document,o[e])},i.brytescore.init=function(){if(void 0===d)for(var e=0;e<o.length;e++)"setapikey"===o[e][0].toLowerCase()&&(brytescore.setAPIKey(o[e][1]),o.splice(e,1));if(void 0===d){var t,r=D("brytescore_apikey");null!==r&&""!==(t=JSON.parse(decodeURIComponent(r))).apikey&&brytescore.setAPIKey(t.apikey)}brytescore.updateCookies(),brytescore.processQueue(),A()},"object"!=typeof JSON?(E="https://cdn.brytecore.com/brytescore.js/JSON3.min.js",L=function(){brytescore.init()},(R=document.createElement("script")).src=E,R.async=!0,R.onreadystatechange=R.onload=function(){var e=R.readyState;L.done||e&&!/loaded|complete/.test(e)||(L.done=!0,L())},document.getElementsByTagName("head")[0].appendChild(R)):brytescore.init()}(window);