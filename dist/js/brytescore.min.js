/*! Brytescore JavaScript library v0.2.0
 *  Copyright 2015 Brytecore, LLC
 */
!function(a,b){"use strict";function c(a,b,c){if(j=d("Post",v+"/"+a),null!==j){var f={event:b,hostName:location.hostname,apiKey:l,anonymousId:m,userId:n,pageViewId:p,sessionId:o,data:c||{}};j.onload=e,j.onerror=function(a){console.log("Error with request"),console.log(a),console.log(j.response)},j.send(JSON.stringify(f))}}function d(a,b){var c=new XMLHttpRequest;return"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c.setRequestHeader("Content-Type","application/json"),c}function e(){var a=j.responseText;if(a&&""!==a&&(a=JSON.parse(a),a&&a.hasOwnProperty("code")))switch(a.code.toLowerCase()){case"success":break;case"unauthorizederror":break;case"badrequesterror":console.error("The request was not properly formatted.")}}function f(){brytescore.killHeartbeat(),G("brytescore_session",null,new Date(1974,9,18)),o=b,D=!0,p=b}function g(){s.removeListener?(s.removeListener("mousemove",H),s.removeListener("click",H),s.removeListener("keyup",H),s.removeListener("scroll",H)):s.detachEvent&&(s.detachEvent("onmousemove",H),s.detachEvent("onkeyup",H),s.detachEvent("onclick",H),s.detachEvent("onscroll",H)),s=b}function h(){clearInterval(B),B=0,r=setTimeout(function(){f()},15e5),s=a,s.addEventListener?(s.addEventListener("mousemove",H),s.addEventListener("click",H),s.addEventListener("scroll",H),s.addEventListener("keyup",H)):s.attachEvent&&(s.attachEvent("onmousemove",H),s.attachEvent("onclick",H),s.attachEvent("onscroll",H),s.attachEvent("onkeyup",H))}Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){b===c?c=0:0>c&&(c+=this.length,0>c&&(c=0));for(var d=this.length;d>c;c++)if(c in this&&this[c]===a)return c;return-1});var i,j,k,l,m,n,o,p,q,r,s,t=brytescore.q,u=[],v="http://api.brytecore.net",w=31536e6,x="heartBeat",y="pageView",z=15e3,A=0,B=0,C="",D=!1,E=function(a){console.log("Brytescore error: "+a)},F=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1);if(-1!==e.indexOf(b))return e.substring(b.length,e.length)}return null},G=function(a,b,c){a=encodeURIComponent(a),b=encodeURIComponent(b),document.cookie=null!==c?a+"="+b+"; expires="+c+"; path=/":a+"="+b+"; path=/"};a.brytescore=function(){""===C&&(C=location.href);var b=location.href;b!==C&&(a.brytescore.killHeartbeat(),a.brytescore.pageview({}),C=b);var c,d=[].slice.call(arguments);if(0===d.length&&E("Invalid method name."),i=d.shift(),0<i.indexOf(".")){var e=i.split("."),f=e[0],g=e[1];c="object"==typeof a.brytescore[f]?a.brytescore[f][g]:null}else c=a.brytescore[i];"function"==typeof c?c.apply(a,d):brytescore.q.push([].slice.call(arguments))},a.brytescore.q=[],a.brytescore.on=function(a,b){u.push(a,b)},a.brytescore.emit=function(){},a.brytescore.removeListener=function(a,b){for(var c=u,d=0;d<c.length;d++)a===c[d][0]&&b===c[d][1]&&u.splice(d,1)},a.brytescore.removeAllListeners=function(a){for(var b=u,c=0;c<b.length;c++)a===b[c][0]&&u.splice(c,1)},a.brytescore.authenticate=function(a,b){var c,d,e,f=F("brytescore_uu");n=a,null!==f?(c=JSON.parse(decodeURIComponent(f)),m=c.aid):m=brytescore.generateUUID(),d=JSON.stringify({aid:m,uid:a}),e=new Date,e.setTime(e.getTime()+w),G("brytescore_uu",d,e.toUTCString()),brytescore.track("authenticate",b)},a.brytescore.submittedForm=function(a){brytescore.track("submittedForm",a)},a.brytescore.updateUserInfo=function(a,c){if(b===n||a!==n){var d,e,f,g=F("brytescore_uu");n=a,null!==g?(d=JSON.parse(decodeURIComponent(g)),m=d.aid):m=brytescore.generateUUID(),e=JSON.stringify({aid:m,uid:a}),f=new Date,f.setTime(f.getTime()+w),G("brytescore_uu",e,f.toUTCString())}brytescore.track("updateUserInfo",c)},a.brytescore.registerAccount=function(a,c){if(b===n||a!==n){var d,e,f,g=F("brytescore_uu");n=a,null!==g?(d=JSON.parse(decodeURIComponent(g)),m=d.aid):m=brytescore.generateUUID(),e=JSON.stringify({aid:m,uid:a}),f=new Date,f.setTime(f.getTime()+w),G("brytescore_uu",e,f.toUTCString())}brytescore.track("registerAccount",c)},a.brytescore.setAPIKey=function(a){l=a},a.brytescore.pageview=function(b){A=0;var c=a.location.protocol+"//"+a.location.host+"/"+a.location.pathname;p=brytescore.generateUUID(),b.pageUrl=c,b.pageTitle=document.title,b.referrer=document.referrer,brytescore.track(y,b);var d=navigator.userAgent;b=JSON.stringify({sid:o,brw:d,aid:m});var e=new Date;e.setTime(e.getTime()+18e5),G("brytescore_session",b,e.toUTCString()),brytescore.heartBeat(),q=a.setInterval(function(){brytescore.heartBeat()},z)},a.brytescore.killHeartbeat=function(){clearInterval(q)},a.brytescore.track=function(a,b){c("track",a,b)},a.brytescore.heartBeat=function(){a.brytescore.track(x,{elapsedTime:A}),A+=z/1e3},a.brytescore.load=function(b){var c=d("GET",b);c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){{var b=JSON.parse(c.responseText),d=b.events,e=b.namespace;b.globals}a.brytescore[e]={};for(var f in d){console.log(f.displayName),a.brytescore.factory=function(b,c){return function(){return a.brytescore.track(c+"."+b,arguments[0])}},a.brytescore[e][f]=a.brytescore.factory(f,e);for(var g=0;g<a.brytescore.q.length;g++)e+"."+f===a.brytescore.q[g][0]&&a.brytescore[e][f](a.brytescore.q[g][1])}}},c.send(),a.brytescore.q=[]};var H=function(){0===B&&(b!==s&&g(),!0===D&&(a.brytescore.updateCookies(),a.brytescore.pageview({})),clearInterval(B),clearTimeout(r),B=a.setInterval(function(){h()},3e5))},I=[];for(k=0;256>k;k++)I[k]=(16>k?"0":"")+k.toString(16);a.brytescore.generateUUID=function(){var a=4294967295*Math.random()|0,b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0;return I[255&a]+I[a>>8&255]+I[a>>16&255]+I[a>>24&255]+"-"+I[255&b]+I[b>>8&255]+"-"+I[b>>16&15|64]+I[b>>24&255]+"-"+I[63&c|128]+I[c>>8&255]+"-"+I[c>>16&255]+I[c>>24&255]+I[255&d]+I[d>>8&255]+I[d>>16&255]+I[d>>24&255]},a.brytescore.updateCookies=function(){var a,b,c,d,e=F("brytescore_uu"),f=F("brytescore_session");null!==e?(a=JSON.parse(decodeURIComponent(e)),m=a.aid,n=a.uid):(m=brytescore.generateUUID(),n=""),b=JSON.stringify({aid:m,uid:n}),c=new Date,c.setTime(c.getTime()+w),G("brytescore_uu",b,c.toUTCString()),null!==f&&!0!==D?(a=JSON.parse(decodeURIComponent(f)),o=a.sid):(o=brytescore.generateUUID(),d=navigator.userAgent,b=JSON.stringify({sid:o,brw:d,aid:m}),c=new Date,c.setTime(c.getTime()+18e5),G("brytescore_session",b,c.toUTCString()),null===e&&brytescore.track("brytescore_uuid_created",{anonymous_id:m}),(null===f||!0===D)&&(D=!1,brytescore.track("session_start",{session_id:o,browser_string:d,anonymous_id:m})))},a.brytescore.is_loaded=function(a){console.log("is_loaded function called for package "+a)},a.brytescore.processQueue=function(){for(k=0;k<t.length;k++)brytescore.apply(document,t[k])},a.brytescore.init=function(){var a;if(a===l)for(k=0;k<t.length;k++)"setapikey"===t[k][0].toLowerCase()&&(brytescore.setAPIKey(t[k][1]),t.splice(k,1));brytescore.updateCookies(),brytescore.processQueue(),H()},brytescore.init()}(window),function(a){"use strict";a.brytescore.eddie=function(){console.log("eddie")}}(window),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();