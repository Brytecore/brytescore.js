!function(e,t){"use strict";function r(e,t,r,s){if(null!==(d=o("Post",U+"/"+e))){var a=t.indexOf("."),i={event:t,eventDisplayName:r,hostName:location.hostname,apiKey:y,anonymousId:l,userId:b.toString(),pageViewId:f,sessionId:p,library:O,libraryVersion:N,schemaVersion:-1===a?E.analytics:E[t.substring(0,a)],data:s||{}};J&&(i.validationOnly=J),d.onload=n,d.onerror=function(e){console.log("Error with request"),console.log(e),console.log(d.response)},i=JSON.stringify(i),A?console.log(i):d.send(i)}}function o(t,r){var o=new XMLHttpRequest;return"withCredentials"in o?(o.open(t,r,!0),o.setRequestHeader("Content-Type","application/json")):"undefined"!=typeof XDomainRequest?e.navigator.userAgent.match(/MSIE [6-9]/)?(r=r.replace(/^http(?:s)?\:/,e.location.protocol),(o=new XDomainRequest).open(t,r)):((o=new XDomainRequest).open(t,r),o.setRequestHeader("Content-Type","application/json")):o=null,o}function n(){var e=d.responseText;if(e&&""!==e&&(e=JSON.parse(e))&&e.hasOwnProperty("code"))switch(e.code.toLowerCase()){case"success":case"unauthorizederror":break;case"badrequesterror":q("The request was not properly formatted.")}}function s(t){a(),b=t,l=brytescore.generateUUID(),p=brytescore.generateUUID();var r=navigator.userAgent;D=!1;var o=JSON.stringify({aid:l,uid:t}),n=new Date;n.setTime(n.getTime()+w),R("brytescore_uu",o,n.toUTCString()),brytescore.track("sessionStarted","started new session",{sessionId:p,browserUA:r,anonymousId:l}),e.brytescore.pageView({})}function a(){brytescore.killHeartbeat(),R("brytescore_session",null,new Date(1974,9,18)),p=t,D=!0,f=t}function i(){v.removeListener?(v.removeListener("mousemove",V),v.removeListener("click",V),v.removeListener("keyup",V),v.removeListener("scroll",V)):v.detachEvent&&(v.detachEvent("onmousemove",V),v.detachEvent("onkeyup",V),v.detachEvent("onclick",V),v.detachEvent("onscroll",V)),v=t}function c(){clearInterval(T),T=0,g=setTimeout(function(){a()},15e5),(v=e).addEventListener?(v.addEventListener("mousemove",V),v.addEventListener("click",V),v.addEventListener("scroll",V),v.addEventListener("keyup",V)):v.attachEvent&&(v.attachEvent("onmousemove",V),v.attachEvent("onclick",V),v.attachEvent("onscroll",V),v.attachEvent("onkeyup",V))}Array.prototype.indexOf||(Array.prototype.indexOf=function(e,r){t===r?r=0:0>r&&0>(r+=this.length)&&(r=0);for(var o=this.length;r<o;r++)if(r in this&&this[r]===e)return r;return-1});var u,d,y,l,b,p,f,m,g,v,h=brytescore.q,I=[],U="https://api.brytecore.com",w=31536e6,k=0,S=0,T=0,C="",D=!1,O="javascript",N="0.3.4",E={analytics:"0.3.1"},A=!1,J=!1,L=!1,q=function(e){console.log("Brytescore error: "+e)},_=function(e){e+="=";for(var t=document.cookie.split(";"),r=0;r<t.length;r++){for(var o=t[r];" "===o.charAt(0);)o=o.substring(1);if(-1!==o.indexOf(e))return o.substring(e.length,o.length)}return null},R=function(e,t,r){e=encodeURIComponent(e),t=encodeURIComponent(t),document.cookie=null!==r?e+"="+t+"; expires="+r+"; path=/":e+"="+t+"; path=/"};e.brytescore=function(){""===C&&(C=location.href);var t=location.href;t!==C&&(e.brytescore.killHeartbeat(),e.brytescore.pageView({}),C=t);var r,o=[].slice.call(arguments);if(0===o.length&&q("Invalid method name."),0<(u=o.shift()).indexOf(".")){var n=u.split("."),s=n[0],a=n[1];r="object"==typeof e.brytescore[s]?e.brytescore[s][a]:null}else r=e.brytescore[u];"function"==typeof r?r.apply(e,o):brytescore.q.push([].slice.call(arguments))},e.brytescore.q=[],e.brytescore.on=function(e,t){I.push(e,t)},e.brytescore.emit=function(e,t){},e.brytescore.removeListener=function(e,t){for(var r=I,o=0;o<r.length;o++)e===r[o][0]&&t===r[o][1]&&I.splice(o,1)},e.brytescore.removeAllListeners=function(e){for(var t=I,r=0;r<t.length;r++)e===t[r][0]&&I.splice(r,1)},e.brytescore.authenticated=function(e){if(!(L||e&&e.isImpersonating)){var t,r,o,n=e.userAccount.id,a=_("brytescore_uu");null!==a?""!==(t=JSON.parse(decodeURIComponent(a))).uid&&t.uid!=n?s(n):l=t.aid:l=brytescore.generateUUID(),r=JSON.stringify({aid:l,uid:n}),(o=new Date).setTime(o.getTime()+w),R("brytescore_uu",r,o.toUTCString()),brytescore.track("authenticated","Logged In",e)}},e.brytescore.submittedForm=function(e){L||e&&e.isImpersonating||brytescore.track("submittedForm","Submitted a Form",e)},e.brytescore.startedChat=function(e){L||e&&e.isImpersonating||brytescore.track("startedChat","User Started a Live Chat",e)},e.brytescore.updatedUserInfo=function(e){if(!(L||e&&e.isImpersonating)){var r=e.userAccount.id;if(t===b||r!==b){var o,n,s,a=_("brytescore_uu");b=r,null!==a?(o=JSON.parse(decodeURIComponent(a)),l=o.aid):l=brytescore.generateUUID(),n=JSON.stringify({aid:l,uid:r}),(s=new Date).setTime(s.getTime()+w),R("brytescore_uu",n,s.toUTCString())}brytescore.track("updatedUserInfo","Updated User Information",e)}},e.brytescore.registeredAccount=function(e){if(!(L||e&&e.isImpersonating)){var r=e.userAccount.id;if(t===b||r!==b){var o,n,s,a=_("brytescore_uu");b=r,null!==a?(o=JSON.parse(decodeURIComponent(a)),l=o.aid):l=brytescore.generateUUID(),n=JSON.stringify({aid:l,uid:r}),(s=new Date).setTime(s.getTime()+w),R("brytescore_uu",n,s.toUTCString())}brytescore.track("registeredAccount","Created a new account",e)}},e.brytescore.setAPIKey=function(e){y=e},e.brytescore.devMode=function(e){A=e},e.brytescore.validationMode=function(e){J=e},e.brytescore.impersonate=function(e){e.isImpersonating&&(L=!0,brytescore.track("impersonate","Impersonated User",e))},e.brytescore.pageView=function(t){if(!(L||t&&t.isImpersonating)){S=0,f=brytescore.generateUUID(),t.pageUrl=e.location.href,t.pageTitle=document.title,t.referrer=document.referrer,brytescore.track("pageView","Viewed a Page",t);var r=navigator.userAgent;t=JSON.stringify({sid:p,brw:r,aid:l});var o=new Date;o.setTime(o.getTime()+18e5),R("brytescore_session",t,o.toUTCString()),brytescore.heartBeat(),m=e.setInterval(function(){var t=(new Date).getTime();0===k||18e5>t-k?(k=(new Date).getTime(),brytescore.heartBeat()):(k=0,a(),e.brytescore.updateCookies(),e.brytescore.pageView({}))},15e3)}},e.brytescore.killHeartbeat=function(){clearInterval(m)},e.brytescore.track=function(e,t,o){L||o&&o.isImpersonating||r("track",e,t,o)},e.brytescore.heartBeat=function(){e.brytescore.track("heartBeat","Heartbeat",{elapsedTime:S}),S+=15},e.brytescore.load=function(t){var r=o("GET",t);r.onload=function(){var t=r.readyState;if(!t||/loaded|complete/.test(t)||4===r.readyState&&200===r.status){var o=JSON.parse(r.responseText),n=o.events,s=o.namespace;E[s]=o.version,e.brytescore[s]={};for(var a in n){e.brytescore.factory=function(t,r,o){return function(){return e.brytescore.track(r+"."+t,o,arguments[0])}},e.brytescore[s][a]=e.brytescore.factory(a,s,n[a].displayName);for(var i=0;i<e.brytescore.q.length;i++)s+"."+a===e.brytescore.q[i][0]&&e.brytescore[s][a](e.brytescore.q[i][1])}}},r.send(),e.brytescore.q=[]};for(var V=function(){0===T&&(t!==v&&i(),!0===D&&(e.brytescore.updateCookies(),e.brytescore.pageView({})),clearInterval(T),clearTimeout(g),T=e.setInterval(function(){c()},3e5))},x=[],M=0;256>M;M++)x[M]=(16>M?"0":"")+M.toString(16);e.brytescore.generateUUID=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return x[255&e]+x[e>>8&255]+x[e>>16&255]+x[e>>24&255]+"-"+x[255&t]+x[t>>8&255]+"-"+x[t>>16&15|64]+x[t>>24&255]+"-"+x[63&r|128]+x[r>>8&255]+"-"+x[r>>16&255]+x[r>>24&255]+x[255&o]+x[o>>8&255]+x[o>>16&255]+x[o>>24&255]},e.brytescore.updateCookies=function(){var e,t,r,o,n=_("brytescore_uu"),s=_("brytescore_session");null!==n?(e=JSON.parse(decodeURIComponent(n)),l=e.aid,b=e.uid):(l=brytescore.generateUUID(),b=""),t=JSON.stringify({aid:l,uid:b}),(r=new Date).setTime(r.getTime()+w),R("brytescore_uu",t,r.toUTCString()),null!==s&&!0!==D?(e=JSON.parse(decodeURIComponent(s)),p=e.sid):(p=brytescore.generateUUID(),o=navigator.userAgent,t=JSON.stringify({sid:p,brw:o,aid:l}),(r=new Date).setTime(r.getTime()+18e5),R("brytescore_session",t,r.toUTCString()),null===n&&brytescore.track("brytescoreUUIDCreated","New user id Created",{anonymousId:l}),null!==s&&!0!==D||(D=!1,brytescore.track("sessionStarted","started new session",{sessionId:p,browserUA:o,anonymousId:l})))},e.brytescore.is_loaded=function(e){console.log("is_loaded function called for package "+e)},e.brytescore.processQueue=function(){for(var e=0;e<h.length;e++)brytescore.apply(document,h[e])},e.brytescore.init=function(){if(void 0===y)for(var e=0;e<h.length;e++)"setapikey"===h[e][0].toLowerCase()&&(brytescore.setAPIKey(h[e][1]),h.splice(e,1));brytescore.updateCookies(),brytescore.processQueue(),V()},"object"!=typeof JSON?function(e,t){var r=document.createElement("script");r.src=e,r.async=!0,r.onreadystatechange=r.onload=function(){var e=r.readyState;t.done||e&&!/loaded|complete/.test(e)||(t.done=!0,t())},document.getElementsByTagName("head")[0].appendChild(r)}("https://cdn.brytecore.com/brytescore.js/JSON3.min.js",function(){brytescore.init()}):brytescore.init()}(window);