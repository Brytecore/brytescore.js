!function(e,t){"use strict";function r(e,t,s,i){if(R?L&&((y=new XMLHttpRequest).open("POST",L,!0),y.setRequestHeader("Content-type","application/json")):y=o("Post",U+"/"+e),void 0===d){var a,c=V("brytescore_apikey");null!==c&&""!==(a=JSON.parse(decodeURIComponent(c))).apikey&&brytescore.setAPIKey(a.apikey)}if(null!==y){var u=t.indexOf("."),m={event:t,eventDisplayName:s,hostName:location.hostname,apiKey:d,anonymousId:l,userId:b.toString(),pageViewId:f,sessionId:p,library:N,libraryVersion:D,schemaVersion:-1===u?J.analytics:J[t.substring(0,u)],data:i||{}};R&&(m.brytecoreUrl=U+"/"+e),A&&(m.validationOnly=A),y.onload=n,y.onerror=function(o){R=!0,r(e,t,s,i)},m=JSON.stringify(m),_?console.log(m):y.send(m)}}function o(t,r){var o=new XMLHttpRequest;return"withCredentials"in o?(o.open(t,r,!0),o.setRequestHeader("Content-Type","application/json")):"undefined"!=typeof XDomainRequest?e.navigator.userAgent.match(/MSIE [6-9]/)?(r=r.replace(/^http(?:s)?\:/,e.location.protocol),(o=new XDomainRequest).open(t,r)):((o=new XDomainRequest).open(t,r),o.setRequestHeader("Content-Type","application/json")):o=null,o}function n(){var e=y.responseText;if(e&&""!==e&&(e=JSON.parse(e))&&e.hasOwnProperty("code"))switch(e.code.toLowerCase()){case"success":case"unauthorizederror":break;case"badrequesterror":q("The request was not properly formatted.")}}function s(t){i(),b=t,l=brytescore.generateUUID(),p=brytescore.generateUUID();var r=navigator.userAgent;O=!1;var o=JSON.stringify({aid:l,uid:t}),n=new Date;n.setTime(n.getTime()+S),H("brytescore_uu",o,n.toUTCString()),brytescore.boost("sessionStarted","started new session",{sessionId:p,browserUA:r,anonymousId:l}),e.brytescore.pageView({})}function i(){brytescore.killHeartbeat(),H("brytescore_session",null,new Date(1974,9,18)),p=t,O=!0,f=t}function a(){v.removeListener?(v.removeListener("mousemove",M),v.removeListener("click",M),v.removeListener("keyup",M),v.removeListener("scroll",M)):v.detachEvent&&(v.detachEvent("onmousemove",M),v.detachEvent("onkeyup",M),v.detachEvent("onclick",M),v.detachEvent("onscroll",M)),v=t}function c(){clearInterval(C),C=0,g=setTimeout(function(){i()},15e5),(v=e).addEventListener?(v.addEventListener("mousemove",M),v.addEventListener("click",M),v.addEventListener("scroll",M),v.addEventListener("keyup",M)):v.attachEvent&&(v.attachEvent("onmousemove",M),v.attachEvent("onclick",M),v.attachEvent("onscroll",M),v.attachEvent("onkeyup",M))}Array.prototype.indexOf||(Array.prototype.indexOf=function(e,r){t===r?r=0:0>r&&0>(r+=this.length)&&(r=0);for(var o=this.length;r<o;r++)if(r in this&&this[r]===e)return r;return-1});var u,y,d,l,b,p,f,m,g,v,h=brytescore.q,I=[],U="https://api.brytecore.com",S=31536e6,w=0,T=0,C=0,k="",O=!1,N="javascript",D="0.3.5",J={analytics:"0.3.1"},_=!1,A=!1,E=!1,L="",R=!1,q=function(e){console.log("Brytescore error: "+e)},V=function(e){e+="=";for(var t=document.cookie.split(";"),r=0;r<t.length;r++){for(var o=t[r];" "===o.charAt(0);)o=o.substring(1);if(-1!==o.indexOf(e))return o.substring(e.length,o.length)}return null},H=function(e,t,r){e=encodeURIComponent(e),t=encodeURIComponent(t),document.cookie=null!==r?e+"="+t+"; expires="+r+"; path=/":e+"="+t+"; path=/"};e.brytescore=function(){""===k&&(k=location.href);var t=location.href;t!==k&&(e.brytescore.killHeartbeat(),e.brytescore.pageView({}),k=t);var r,o=[].slice.call(arguments);if(0===o.length&&q("Invalid method name."),0<(u=o.shift()).indexOf(".")){var n=u.split("."),s=n[0],i=n[1];r="object"==typeof e.brytescore[s]?e.brytescore[s][i]:null}else r=e.brytescore[u];"function"==typeof r?r.apply(e,o):brytescore.q.push([].slice.call(arguments))},e.brytescore.q=[],e.brytescore.on=function(e,t){I.push(e,t)},e.brytescore.emit=function(e,t){},e.brytescore.removeListener=function(e,t){for(var r=I,o=0;o<r.length;o++)e===r[o][0]&&t===r[o][1]&&I.splice(o,1)},e.brytescore.removeAllListeners=function(e){for(var t=I,r=0;r<t.length;r++)e===t[r][0]&&I.splice(r,1)},e.brytescore.authenticated=function(e){if(!(E||e&&e.isImpersonating)){var t,r,o,n=e.userAccount.id,i=V("brytescore_uu");null!==i?""!==(t=JSON.parse(decodeURIComponent(i))).uid&&t.uid!==n?s(n):l=t.aid:l=brytescore.generateUUID(),r=JSON.stringify({aid:l,uid:n}),(o=new Date).setTime(o.getTime()+S),H("brytescore_uu",r,o.toUTCString()),brytescore.boost("authenticated","Logged In",e)}},e.brytescore.submittedForm=function(e){E||e&&e.isImpersonating||brytescore.boost("submittedForm","Submitted a Form",e)},e.brytescore.startedChat=function(e){E||e&&e.isImpersonating||brytescore.boost("startedChat","User Started a Live Chat",e)},e.brytescore.updatedUserInfo=function(e){if(!(E||e&&e.isImpersonating)){var r=e.userAccount.id;if(t===b||r!==b){var o,n,s,i=V("brytescore_uu");b=r,null!==i?(o=JSON.parse(decodeURIComponent(i)),l=o.aid):l=brytescore.generateUUID(),n=JSON.stringify({aid:l,uid:r}),(s=new Date).setTime(s.getTime()+S),H("brytescore_uu",n,s.toUTCString())}brytescore.boost("updatedUserInfo","Updated User Information",e)}},e.brytescore.registeredAccount=function(e){if(!(E||e&&e.isImpersonating)){var r=e.userAccount.id;if(t===b||r!==b){var o,n,s,i=V("brytescore_uu");b=r,null!==i?(o=JSON.parse(decodeURIComponent(i)),l=o.aid):l=brytescore.generateUUID(),n=JSON.stringify({aid:l,uid:r}),(s=new Date).setTime(s.getTime()+S),H("brytescore_uu",n,s.toUTCString())}brytescore.boost("registeredAccount","Created a new account",e)}},e.brytescore.setAPIKey=function(e){d=e;var t,r,o=V("brytescore_apikey");null!==o?""!==(t=JSON.parse(decodeURIComponent(o))).apikey&&t.apikey!==e&&(r=JSON.stringify({apikey:e}),H("brytescore_apikey",r,null)):(r=JSON.stringify({apikey:e}),H("brytescore_apikey",r,null))},e.brytescore.devMode=function(e){_=e},e.brytescore.validationMode=function(e){A=e},e.brytescore.localUrl=function(e){L=e},e.brytescore.impersonate=function(e){e.isImpersonating&&(E=!0,brytescore.boost("impersonate","Impersonated User",e))},e.brytescore.pageView=function(t){if(!(E||t&&t.isImpersonating)){T=0,f=brytescore.generateUUID(),t.pageUrl=e.location.href,t.pageTitle=document.title,t.referrer=document.referrer,brytescore.boost("pageView","Viewed a Page",t);var r=navigator.userAgent;t=JSON.stringify({sid:p,brw:r,aid:l});var o=new Date;o.setTime(o.getTime()+18e5),H("brytescore_session",t,o.toUTCString()),brytescore.heartBeat(),m=e.setInterval(function(){var t=(new Date).getTime();0===w||18e5>t-w?(w=(new Date).getTime(),brytescore.heartBeat()):(w=0,i(),e.brytescore.updateCookies(),e.brytescore.pageView({}))},15e3)}},e.brytescore.killHeartbeat=function(){clearInterval(m)},e.brytescore.boost=function(e,t,o){E||o&&o.isImpersonating||r("boost",e,t,o)},e.brytescore.heartBeat=function(){e.brytescore.boost("heartBeat","Heartbeat",{elapsedTime:T}),T+=15},e.brytescore.load=function(t,r){var n=o("GET",t);n.onload=function(){var t=n.readyState;if(!t||/loaded|complete/.test(t)||4===n.readyState&&200===n.status){var r=JSON.parse(n.responseText),o=r.events,s=r.namespace;J[s]=r.version,e.brytescore[s]={};for(var i in o){e.brytescore.factory=function(t,r,o){return function(){return e.brytescore.boost(r+"."+t,o,arguments[0])}},e.brytescore[s][i]=e.brytescore.factory(i,s,o[i].displayName);for(var a=0;a<e.brytescore.q.length;a++)s+"."+i===e.brytescore.q[a][0]&&e.brytescore[s][i](e.brytescore.q[a][1])}}},n.onerror=function(){r&&brytescore.load(r)},n.send(),e.brytescore.q=[]};for(var M=function(){0===C&&(t!==v&&a(),!0===O&&(e.brytescore.updateCookies(),e.brytescore.pageView({})),clearInterval(C),clearTimeout(g),C=e.setInterval(function(){c()},3e5))},j=[],x=0;256>x;x++)j[x]=(16>x?"0":"")+x.toString(16);e.brytescore.generateUUID=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return j[255&e]+j[e>>8&255]+j[e>>16&255]+j[e>>24&255]+"-"+j[255&t]+j[t>>8&255]+"-"+j[t>>16&15|64]+j[t>>24&255]+"-"+j[63&r|128]+j[r>>8&255]+"-"+j[r>>16&255]+j[r>>24&255]+j[255&o]+j[o>>8&255]+j[o>>16&255]+j[o>>24&255]},e.brytescore.updateCookies=function(){var e,t,r,o,n=V("brytescore_uu"),s=V("brytescore_session");null!==n?(e=JSON.parse(decodeURIComponent(n)),l=e.aid,b=e.uid):(l=brytescore.generateUUID(),b=""),t=JSON.stringify({aid:l,uid:b}),(r=new Date).setTime(r.getTime()+S),H("brytescore_uu",t,r.toUTCString()),null!==s&&!0!==O?(e=JSON.parse(decodeURIComponent(s)),p=e.sid):(p=brytescore.generateUUID(),o=navigator.userAgent,t=JSON.stringify({sid:p,brw:o,aid:l}),(r=new Date).setTime(r.getTime()+18e5),H("brytescore_session",t,r.toUTCString()),null===n&&brytescore.boost("brytescoreUUIDCreated","New user id Created",{anonymousId:l}),null!==s&&!0!==O||(O=!1,brytescore.boost("sessionStarted","started new session",{sessionId:p,browserUA:o,anonymousId:l})))},e.brytescore.is_loaded=function(e){console.log("is_loaded function called for package "+e)},e.brytescore.processQueue=function(){for(var e=0;e<h.length;e++)brytescore.apply(document,h[e])},e.brytescore.init=function(){if(void 0===d)for(var e=0;e<h.length;e++)"setapikey"===h[e][0].toLowerCase()&&(brytescore.setAPIKey(h[e][1]),h.splice(e,1));if(void 0===d){var t,r=V("brytescore_apikey");null!==r&&""!==(t=JSON.parse(decodeURIComponent(r))).apikey&&brytescore.setAPIKey(t.apikey)}brytescore.updateCookies(),brytescore.processQueue(),M()},"object"!=typeof JSON?function(e,t){var r=document.createElement("script");r.src=e,r.async=!0,r.onreadystatechange=r.onload=function(){var e=r.readyState;t.done||e&&!/loaded|complete/.test(e)||(t.done=!0,t())},document.getElementsByTagName("head")[0].appendChild(r)}("https://cdn.brytecore.com/brytescore.js/JSON3.min.js",function(){brytescore.init()}):brytescore.init()}(window);