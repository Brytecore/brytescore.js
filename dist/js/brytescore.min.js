/*! Brytescore JavaScript library v0.3.7
 *  Copyright 2015-2021 Brytecore, Inc
 */
!function(a,b){"use strict";function c(a,b,e,f,g){var h;if(M?L&&(h=new XMLHttpRequest,h.open("POST",L,!0),h.setRequestHeader("Content-type","application/json")):h=d("Post",u+"/"+a),"undefined"==typeof k){var i,j=O("brytescore_apikey");null!==j&&(i=JSON.parse(decodeURIComponent(j)),""!==i.apikey&&brytescore.setAPIKey(i.apikey))}if(null!==h){h.timeout=5e3;var p=b.indexOf("."),q={event:b,eventDisplayName:e,hostName:location.hostname,apiKey:k,anonymousId:l,userId:m.toString(),pageViewId:o,sessionId:n,library:F,libraryVersion:G,schemaVersion:-1===p?H.analytics:H[b.substring(0,p)],data:f||{}};M&&(q.brytecoreUrl=u+"/"+a),J&&(q.validationOnly=J),h.onload=function(){var a=h.responseText;if(a&&""!==a&&(a=JSON.parse(a),a&&a.hasOwnProperty("code")))switch(a.code.toLowerCase()){case"success":break;case"unauthorizederror":break;case"badrequesterror":N("The request was not properly formatted.")}},h.onreadystatechange=function(){if(4==h.readyState&&g)try{g(h.status,JSON.parse(h.responseText))}catch(a){g(h.status,null,a)}},h.onerror=function(d){if(M=!0,g)try{g(h.status,null,d)}catch(i){g(h.status,null,i)}else c(a,b,e,f,g)},h.ontimeout=function(a){g&&g(h.status,null,a)},q=JSON.stringify(q),I?(console.log(q),g&&g("DevMode",null)):h.send(q)}else g&&g("cors not supported",null)}function d(b,c){var d=new XMLHttpRequest;return"withCredentials"in d?(d.open(b,c,!0),d.setRequestHeader("Content-Type","application/json")):"undefined"!=typeof XDomainRequest?a.navigator.userAgent.match(/MSIE [6-9]/)?(c=c.replace(/^http(?:s)?\:/,a.location.protocol),d=new XDomainRequest,d.open(b,c)):(d=new XDomainRequest,d.open(b,c),d.setRequestHeader("Content-Type","application/json")):d=null,d}function e(b){f(),m=b,l=brytescore.generateUUID(),n=brytescore.generateUUID();var c=navigator.userAgent;E=!1;var d=JSON.stringify({aid:l,uid:b}),e=new Date;e.setTime(e.getTime()+v),P("brytescore_uu",d,e.toUTCString()),brytescore.boost("sessionStarted","started new session",{sessionId:n,browserUA:c,anonymousId:l}),a.brytescore.pageView({})}function f(){brytescore.killHeartbeat(),P("brytescore_session",null,new Date(1974,9,18)),n=b,E=!0,o=b}function g(){r.removeListener?(r.removeListener("mousemove",Q),r.removeListener("click",Q),r.removeListener("keyup",Q),r.removeListener("scroll",Q)):r.detachEvent&&(r.detachEvent("onmousemove",Q),r.detachEvent("onkeyup",Q),r.detachEvent("onclick",Q),r.detachEvent("onscroll",Q)),r=b}function h(){clearInterval(C),C=0,q=setTimeout(function(){f()},15e5),r=a,r.addEventListener?(r.addEventListener("mousemove",Q),r.addEventListener("click",Q),r.addEventListener("scroll",Q),r.addEventListener("keyup",Q)):r.attachEvent&&(r.attachEvent("onmousemove",Q),r.attachEvent("onclick",Q),r.attachEvent("onscroll",Q),r.attachEvent("onkeyup",Q))}function i(a,b){var c=document.createElement("script");c.src=a,c.async=!0,c.onreadystatechange=c.onload=function(){var a=c.readyState;b.done||a&&!/loaded|complete/.test(a)||(b.done=!0,b())},document.getElementsByTagName("head")[0].appendChild(c)}Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){b===c?c=0:0>c&&(c+=this.length,0>c&&(c=0));for(var d=this.length;c<d;c++)if(c in this&&this[c]===a)return c;return-1});var j,k,l,m,n,o,p,q,r,s=brytescore.q,t=[],u="https://api.brytecore.com",v=31536e6,w="heartBeat",x="pageView",y="impersonate",z=0,A=15e3,B=0,C=0,D="",E=!1,F="javascript",G="0.3.7",H={analytics:"0.3.1"},I=!1,J=!1,K=!1,L="",M=!1,N=function(a){console.log("Brytescore error: "+a)},O=function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1);if(-1!==d.indexOf(a))return d.substring(a.length,d.length)}return null},P=function(a,b,c){a=encodeURIComponent(a),b=encodeURIComponent(b),null!==c?document.cookie=a+"="+b+"; expires="+c+"; path=/":document.cookie=a+"="+b+"; path=/"};a.brytescore=function(){""===D&&(D=location.href);var b=location.href;b!==D&&(a.brytescore.killHeartbeat(),a.brytescore.pageView({}),D=b);var c,d=[].slice.call(arguments);if(0===d.length&&N("Invalid method name."),j=d.shift(),0<j.indexOf(".")){var e=j.split("."),f=e[0],g=e[1];c="object"==typeof a.brytescore[f]?a.brytescore[f][g]:null}else c=a.brytescore[j];"function"==typeof c?c.apply(a,d):brytescore.q.push([].slice.call(arguments))},a.brytescore.q=[],a.brytescore.on=function(a,b){t.push(a,b)},a.brytescore.emit=function(a,b){},a.brytescore.removeListener=function(a,b){for(var c=t,d=0;d<c.length;d++)a===c[d][0]&&b===c[d][1]&&t.splice(d,1)},a.brytescore.removeAllListeners=function(a){for(var b=t,c=0;c<b.length;c++)a===b[c][0]&&t.splice(c,1)},a.brytescore.authenticated=function(a,b){if(!(K||a&&a.isImpersonating)){var c,d,f,g=a.userAccount.id,h=O("brytescore_uu");null!==h?(c=JSON.parse(decodeURIComponent(h)),""!==c.uid&&c.uid!==g?e(g):l=c.aid):l=brytescore.generateUUID(),d=JSON.stringify({aid:l,uid:g}),f=new Date,f.setTime(f.getTime()+v),P("brytescore_uu",d,f.toUTCString()),brytescore.boost("authenticated","Logged In",a,b)}},a.brytescore.submittedForm=function(a,b){K||a&&a.isImpersonating||brytescore.boost("submittedForm","Submitted a Form",a,b)},a.brytescore.startedChat=function(a,b){K||a&&a.isImpersonating||brytescore.boost("startedChat","User Started a Live Chat",a,b)},a.brytescore.updatedUserInfo=function(a,c){if(!(K||a&&a.isImpersonating)){var d=a.userAccount.id;if(b===m||d!==m){var e,f,g,h=O("brytescore_uu");m=d,null!==h?(e=JSON.parse(decodeURIComponent(h)),l=e.aid):l=brytescore.generateUUID(),f=JSON.stringify({aid:l,uid:d}),g=new Date,g.setTime(g.getTime()+v),P("brytescore_uu",f,g.toUTCString())}brytescore.boost("updatedUserInfo","Updated User Information",a,c)}},a.brytescore.registeredAccount=function(a,c){if(!(K||a&&a.isImpersonating)){var d=a.userAccount.id;if(b===m||d!==m){var e,f,g,h=O("brytescore_uu");m=d,null!==h?(e=JSON.parse(decodeURIComponent(h)),l=e.aid):l=brytescore.generateUUID(),f=JSON.stringify({aid:l,uid:d}),g=new Date,g.setTime(g.getTime()+v),P("brytescore_uu",f,g.toUTCString())}brytescore.boost("registeredAccount","Created a new account",a,c)}},a.brytescore.setAPIKey=function(a){k=a;var b,c,d=O("brytescore_apikey");null!==d?(b=JSON.parse(decodeURIComponent(d)),""!==b.apikey&&b.apikey!==a&&(c=JSON.stringify({apikey:a}),P("brytescore_apikey",c,null))):(c=JSON.stringify({apikey:a}),P("brytescore_apikey",c,null))},a.brytescore.devMode=function(a){I=a},a.brytescore.validationMode=function(a){J=a},a.brytescore.localUrl=function(a){L=a},a.brytescore.impersonate=function(a,b){a.isImpersonating&&(K=!0,brytescore.boost(y,"Impersonated User",a,b))},a.brytescore.pageView=function(b,c){if(!(K||b&&b.isImpersonating)){B=0,o=brytescore.generateUUID(),b.pageUrl=a.location.href,b.pageTitle=document.title,b.referrer=document.referrer,brytescore.boost(x,"Viewed a Page",b,c);var d=navigator.userAgent;b=JSON.stringify({sid:n,brw:d,aid:l});var e=new Date;e.setTime(e.getTime()+18e5),P("brytescore_session",b,e.toUTCString()),brytescore.heartBeat(),p=a.setInterval(function(){var b=(new Date).getTime();0===z||18e5>b-z?(z=(new Date).getTime(),brytescore.heartBeat()):(z=0,f(),a.brytescore.updateCookies(),a.brytescore.pageView({}))},A)}},a.brytescore.killHeartbeat=function(){clearInterval(p)},a.brytescore.boost=function(a,b,d,e){K||d&&d.isImpersonating||c("boost",a,b,d,e)},a.brytescore.heartBeat=function(){a.brytescore.boost(w,"Heartbeat",{elapsedTime:B}),B+=A/1e3},a.brytescore.load=function(b,c){var e=d("GET",b);e.onload=function(){var b=e.readyState;if(!b||/loaded|complete/.test(b)||4===e.readyState&&200===e.status){var c=JSON.parse(e.responseText),d=c.events,f=c.namespace;H[f]=c.version,a.brytescore[f]={};for(var g in d){a.brytescore.factory=function(b,c,d){return function(){return a.brytescore.boost(c+"."+b,d,arguments[0],arguments[1])}},a.brytescore[f][g]=a.brytescore.factory(g,f,d[g].displayName);for(var h=0;h<a.brytescore.q.length;h++)f+"."+g===a.brytescore.q[h][0]&&(a.brytescore.q[h][2]?a.brytescore[f][g](a.brytescore.q[h][1],a.brytescore.q[h][2]):a.brytescore[f][g](a.brytescore.q[h][1]))}}},e.onerror=function(){c&&brytescore.load(c)},e.send(),a.brytescore.q=[]};for(var Q=function(){0===C&&(b!==r&&g(),!0===E&&(a.brytescore.updateCookies(),a.brytescore.pageView({})),clearInterval(C),clearTimeout(q),C=a.setInterval(function(){h()},3e5))},R=[],S=0;256>S;S++)R[S]=(16>S?"0":"")+S.toString(16);a.brytescore.generateUUID=function(){var a=4294967295*Math.random()|0,b=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0;return R[255&a]+R[a>>8&255]+R[a>>16&255]+R[a>>24&255]+"-"+R[255&b]+R[b>>8&255]+"-"+R[b>>16&15|64]+R[b>>24&255]+"-"+R[63&c|128]+R[c>>8&255]+"-"+R[c>>16&255]+R[c>>24&255]+R[255&d]+R[d>>8&255]+R[d>>16&255]+R[d>>24&255]},a.brytescore.updateCookies=function(){var a,b,c,d,e=O("brytescore_uu"),f=O("brytescore_session");null!==e?(a=JSON.parse(decodeURIComponent(e)),l=a.aid,m=a.uid):(l=brytescore.generateUUID(),m=""),b=JSON.stringify({aid:l,uid:m}),c=new Date,c.setTime(c.getTime()+v),P("brytescore_uu",b,c.toUTCString()),null!==f&&!0!==E?(a=JSON.parse(decodeURIComponent(f)),n=a.sid):(n=brytescore.generateUUID(),d=navigator.userAgent,b=JSON.stringify({sid:n,brw:d,aid:l}),c=new Date,c.setTime(c.getTime()+18e5),P("brytescore_session",b,c.toUTCString()),null===e&&brytescore.boost("brytescoreUUIDCreated","New user id Created",{anonymousId:l}),null!==f&&!0!==E||(E=!1,brytescore.boost("sessionStarted","started new session",{sessionId:n,browserUA:d,anonymousId:l})))},a.brytescore.is_loaded=function(a){console.log("is_loaded function called for package "+a)},a.brytescore.processQueue=function(){for(var a=0;a<s.length;a++)brytescore.apply(document,s[a])},a.brytescore.getApiKey=function(){if("undefined"!=typeof k)return k;var a,b=O("brytescore_apikey");return null!==b&&(a=JSON.parse(decodeURIComponent(b)),""!==a.apikey)?a.apikey:void 0},a.brytescore.getAID=function(){var a,b=O("brytescore_uu");return l?l:null!==b?(a=JSON.parse(decodeURIComponent(b)),a.aid):void 0},a.brytescore.getUID=function(){var a,b=O("brytescore_uu");return m?m:null!==b?(a=JSON.parse(decodeURIComponent(b)),a.uid):void 0},a.brytescore.init=function(){if("undefined"==typeof k)for(var a=0;a<s.length;a++)"setapikey"===s[a][0].toLowerCase()&&(brytescore.setAPIKey(s[a][1]),s.splice(a,1));if("undefined"==typeof k){var b,c=O("brytescore_apikey");null!==c&&(b=JSON.parse(decodeURIComponent(c)),""!==b.apikey&&brytescore.setAPIKey(b.apikey))}brytescore.updateCookies(),brytescore.processQueue(),Q()},"object"!=typeof JSON?i("https://cdn.brytecore.com/brytescore.js/JSON3.min.js",function(){brytescore.init()}):brytescore.init()}(window),function(a,b){function c(b,c){if(b){var d=JSON.parse(b),e=d.data.key;d&&!0===d.data.is_enabled&&(a.__lc=a.__lc||{},a.__lc.license=e,a.__lc.params=[{name:"aid",value:c},{name:"uid",value:h}],function(a,b,c){function d(a){return e._h?e._h.apply(null,a):e._q.push(a)}var e={_q:[],_h:null,_v:"2.0",on:function(){d(["on",c.call(arguments)])},once:function(){d(["once",c.call(arguments)])},off:function(){d(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return d(["get",c.call(arguments)])},call:function(){d(["call",c.call(arguments)])},init:function(){var a=b.createElement("script");a.async=!0,a.type="text/javascript",a.src="https://cdn.livechatinc.com/tracking.js",b.head.appendChild(a)}};!a.__lc.asyncInit&&e.init(),a.LiveChatWidget=a.LiveChatWidget||e}(a,document,[].slice))}}var d="https://chat-api.brytecore.net",e=new XMLHttpRequest,f=a.brytescore.getApiKey(),g=a.brytescore.getAID(),h=a.brytescore.getUID(),i=d+"/settings/enabled?apiKey="+f+"&domain="+a.location.hostname+"&url="+a.location.href;e.onload=function(){c(e.response,g)},e.open("GET",i,!0),e.setRequestHeader("Content-type","application/json"),e.send()}(window);